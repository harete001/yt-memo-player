<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube格ゲーリプレイメモ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <nav class="app-sidebar">
            <div class="sidebar-header">
                <h1>YT Memo</h1>
                <button id="toggle-sidebar-btn" title="サイドバーを折りたたむ">«</button>
            </div>
            <ul>
                <li><a href="#video" class="nav-link active" data-page="page-video">動画プレイヤー</a></li>
                <li><a href="#history" class="nav-link" data-page="page-history">再生履歴</a></li>
                <li><a href="#settings" class="nav-link" data-page="page-settings">設定</a></li>
            </ul>
        </nav>

        <main class="app-main">
            <!-- Page 1: Video Player -->
            <section id="page-video" class="page">
                <div class="video-page__layout">
                    <article class="video-page__main">
                        <div id="player-container">
                            <div id="player"></div>
                        </div>
                        <div class="quick-memo-area">
                            <textarea id="quick-memo-input" placeholder="ここにメモを入力 (Enterで追加 / Shift+Enterで改行)"></textarea>
                            <div class="quick-memo-actions">
                                <button id="prev-frame" class="player-control-btn" title="1フレーム戻る" disabled>‹ 1F</button>
                                <button id="next-frame" class="player-control-btn" title="1フレーム進む" disabled>1F ›</button>
                                <button id="add-quick-memo">メモを追加</button>
                            </div>
                        </div>
                        <div class="input-area">
                            <input type="text" id="youtube-url" placeholder="YouTube動画のURLを入力">
                            <button id="paste-url">ペースト</button>
                            <button id="load-video">再生</button>
                        </div>
                    </article>
                    <aside class="video-page__sidebar">
                        <div class="memo-area">
                            <h2>メモ</h2>
                            <!-- メモ追加機能はクイックメモ欄に集約。このボタンはJSから参照するために残し、非表示にする -->
                            <button id="add-memo" hidden>タイムスタンプ付きでメモを追加</button>
                            <ul id="memo-list"></ul>
                        </div>
                    </aside>
                </div>
            </section>

            <!-- Page 2: History -->
            <section id="page-history" class="page hidden">
                <div class="history-page-container">
                    <h2>再生履歴</h2>
                    <div class="search-container">
                        <input type="text" id="history-search" placeholder="履歴をタイトルで検索...">
                    </div>
                    <div class="history-header">
                        <div class="history-col-title">タイトル</div>
                        <div class="history-col-memos">メモ数</div>
                        <div class="history-col-date">最終再生日時</div>
                        <div class="history-col-actions">削除</div>
                    </div>
                    <ul id="history-list">
                        <!-- History items will be rendered here by JS -->
                    </ul>
                </div>
            </section>

            <!-- Page 3: Settings -->
            <section id="page-settings" class="page hidden">
                <div class="settings-page-container">
                    <nav class="settings-sidebar">
                        <ul>
                            <li><a href="#settings-general" class="settings-nav-link active" data-subpage="settings-general">一般</a></li>
                            <li><a href="#settings-data" class="settings-nav-link" data-subpage="settings-data">データ管理</a></li>
                            <li><a href="#settings-about" class="settings-nav-link" data-subpage="settings-about">このアプリについて</a></li>
                        </ul>
                    </nav>
                    <main class="settings-main">
                        <!-- Settings Sub-Page: General -->
                        <section id="settings-general" class="settings-subpage">
                            <h2>一般設定</h2>
                            <section class="setting-item">
                                <h3>テーマ設定</h3>
                                <p>アプリの表示テーマを選択します。</p>
                                <div class="theme-switcher">
                                    <input type="radio" id="theme-light" name="theme" value="light" checked>
                                    <label for="theme-light">ライト</label>
                                    <input type="radio" id="theme-dark" name="theme" value="dark">
                                    <label for="theme-dark">ダーク</label>
                                </div>
                            </section>
                        </section>

                        <!-- Settings Sub-Page: Data -->
                        <section id="settings-data" class="settings-subpage hidden">
                            <h2>データ管理</h2>
                            <section class="setting-item">
                                <h3>設定のエクスポート</h3>
                                <p>すべての再生履歴とメモを単一のJSONファイルとしてダウンロードします。</p>
                                <button id="export-button">エクスポート</button>
                            </section>
                            <section class="setting-item">
                                <h3>設定のインポート</h3>
                                <p>JSONファイルから再生履歴とメモを復元します。現在のデータは上書きされますのでご注意ください。</p>
                                <button id="import-button">インポート</button>
                                <input type="file" id="import-file-input" accept=".json" hidden>
                            </section>
                        </section>
                        
                        <!-- Settings Sub-Page: About -->
                        <section id="settings-about" class="settings-subpage hidden">
                            <h2>このアプリについて</h2>
                            <section class="setting-item">
                                <p>YT Memo v1.0.0</p>
                            </section>
                        </section>
                    </main>
                </div>
            </section>
        </main>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="script.js"></script>
</body>
</html>
